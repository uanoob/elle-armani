"use strict";

var intro = document.querySelector(".intro"), title = document.querySelector(".intro__title"), subtitle = document.querySelector(".intro__subtitle"), shade = document.querySelector(".intro__shade"), description = document.querySelector(".intro__description");

function addClass(e) {
    intro.classList.add("intro--" + e), title.classList.add("intro__title--" + e), subtitle.classList.add("intro__subtitle--" + e), 
    shade.classList.add("intro__shade--" + e), description.classList.add("intro__description--" + e);
}

function removeClass(e) {
    intro.classList.remove("intro--" + e), title.classList.remove("intro__title--" + e), 
    subtitle.classList.remove("intro__subtitle--" + e), shade.classList.remove("intro__shade--" + e), 
    description.classList.remove("intro__description--" + e);
}

var n = 1;

function timer(e) {
    addClass(e), setTimeout(function() {
        removeClass(e), 3 < (e += 1) && (e = 1), timer(e);
    }, 3e3);
}

document.addEventListener("DOMContentLoaded", timer(n));

var container = document.querySelector(".container"), prevBtn = document.querySelector(".btn__slider--prev"), nextBtn = document.querySelector(".btn__slider--next"), slides = document.querySelectorAll(".slide-item");

function moveLeft() {
    showSlides(slideIndex -= 1);
}

function moveRight() {
    showSlides(slideIndex += 1);
}

prevBtn.addEventListener("click", function() {
    moveLeft();
}), nextBtn.addEventListener("click", function() {
    moveRight();
}), window.addEventListener("resize", function() {
    resizeHandler();
});

var slideIndex = 2;

function showSlides(e) {
    var t = void 0;
    for (e > slides.length && (slideIndex = 2), e < 2 && (slideIndex = slides.length), 
    t = 0; t < slides.length; t++) slides[t].style.display = "none";
    slides[slideIndex - 1].style.display = "block", slides[slideIndex - 2].style.display = "block";
}

function showAll() {
    for (var e = 0; e < slides.length; e++) slides[e].style.display = "block";
}

function resizeHandler() {
    window.innerWidth < 1140 ? showSlides(slideIndex) : showAll();
}

document.addEventListener("DOMContentLoaded", resizeHandler());

var submitBtn = document.querySelector(".discount__form-button"), overlay = document.querySelector(".overlay"), popup = document.querySelector(".popup"), popupBtnClose = document.querySelector(".popup__button-close");

function showPopup(e) {
    e.preventDefault(), overlay.classList.add("overlay-show"), popup.classList.add("popup-show");
}

function closePopup(e) {
    e.preventDefault(), overlay.classList.remove("overlay-show"), popup.classList.remove("popup-show");
}

submitBtn.addEventListener("click", function() {
    showPopup(event);
}), popupBtnClose.addEventListener("click", function() {
    closePopup(event);
});